# D2I Lite Agent Rules

适用范围：`d2ilite/` 仓库内全部任务。

## 1. 开始前必做

收到任何“抓取页面 / 生成模板 / 调整模板 / 继续任务 / 排查模板问题”请求时，必须先读取并遵循以下文档：

1. `docs/模板生成与使用SOP.md`
2. `docs/抓取页面与模板生成规范.md`

## 2. 先输出再执行

在用户给出链接后，正式改模板前必须先输出三项：

1. 执行步骤清单
2. 推荐模式（`requests_jsl` 或 `browser`）及理由
3. 验收口径（`expected/discovered/downloaded/completed`）

得到用户确认或默认继续后，再开始模板编写与验证。

## 3. 模板交付最低要求

每次模板任务交付时，至少包含：

1. 模板文件路径（`scraper/templates/*.json`）
2. 验证文档路径（`docs/template_validation_*.md`）
3. 计数结果与差异说明
4. 推荐模式与备选模式切换条件

## 4. 命名与可用性硬约束

1. 最终图片命名必须以人物姓名为中心（冲突时 `_2/_3` 去重）。
2. 不得以哈希或纯序号作为最终主命名策略。
3. 必须保证“已完成条目”点击可稳定定位并打开对应图片。
